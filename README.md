# Система Вопросов и Ответов ITMO

Комплексная система вопросов и ответов, разработанная для Университета ИТМО, использующая современные веб-технологии и модели искусственного интеллекта для предоставления точных и контекстно-зависимых ответов.

## Содержание

- [Введение](#введение)
- [Особенности](#особенности)
- [Архитектура](#архитектура)
- [Начало работы](#начало-работы)
  - [Требования](#требования)
  - [Установка](#установка)
  - [Конфигурация](#конфигурация)
  - [Запуск приложения](#запуск-приложения)
- [Документация API](#документация-api)
- [Тестирование](#тестирование)
- [Фронтенд](#фронтенд)
- [Развертывание](#развертывание)

## Введение

Система Вопросов и Ответов ITMO предназначена для помощи пользователям в получении точной информации, связанной с Университетом ИТМО. Система преобразует пользовательские запросы в оптимизированные поисковые термины, извлекает релевантные данные из Интернета и использует модели искусственного интеллекта для обработки, предоставляя точные ответы вместе с достоверными источниками.

## Особенности

- **Преобразование запросов**: Конвертирует пользовательские вопросы в оптимизированные поисковые запросы.
- **Интеграция веб-поиска**: Использует Serpstack API для получения релевантных веб-страниц.
- **Обработка контента**: Загружает и обрабатывает содержимое страниц для извлечения информации, связанной с ИТМО.
- **Искусственный интеллект для рассуждений**: Использует модели ИИ для определения правильного ответа и предоставления объяснений.
- **Надежное логирование**: Комплексное логирование для мониторинга и отладки.
- **Автоматизированное тестирование**: Набор тестовых случаев для обеспечения надежности системы.
- **Удобный фронтенд**: Интерфейс на базе React для взаимодействия с системой.

## Архитектура

Система состоит из двух основных компонентов:

1. **Бэкенд (FastAPI)**:
   - Обрабатывает API-запросы.
   - Управляет преобразованием запросов, веб-поиском, загрузкой контента и рассуждениями ИИ.
   - Предоставляет конечные точки для взаимодействия с фронтендом.

2. **Фронтенд (React)**:
   - Предоставляет пользовательский интерфейс для отправки запросов и просмотра ответов.
   - Общается с бэкендом через API-вызовы.

Кроме того, используется Docker для контейнеризации сервисов, что облегчает развертывание.

## Начало работы

### Требования

- **Docker**: Убедитесь, что Docker установлен на вашем компьютере. [Установка Docker](https://docs.docker.com/get-docker/)
- **Docker Compose**: Обычно поставляется вместе с Docker Desktop.

### Установка

1. **Клонируйте репозиторий**:

    ```bash
    git clone https://github.com/yourusername/itmo-qa-system.git
    cd itmo-qa-system
    ```

2. **Настройте переменные окружения**:

    Создайте файл `.env` в директории `backend` с необходимыми переменными окружения, такими как `SEARCH_API_KEY` и `SEARCH_URL`.

    ```env
    SEARCH_API_KEY=ваш_serpstack_api_key
    SEARCH_URL=https://api.serpstack.com/search
    ```

3. **Сборка и запуск с помощью Docker Compose**:

    ```bash
    docker-compose up --build
    ```

    Это создаст и запустит контейнеры для бэкенда и фронтенда.

### Конфигурация

- **Бэкенд**:
  - Файл конфигурации находится в `backend/config.py`.
  - Убедитесь, что все необходимые API-ключи и URL-адреса настроены правильно.

- **Фронтенд**:
  - Файл конфигурации находится в `frontend/llm-agent-megaschool/src/config.js`.
  - Убедитесь, что `API_BASE_URL` указывает на правильный адрес бэкенда.

### Запуск приложения

После успешного запуска контейнеров, доступ к фронтенду можно получить по адресу `http://localhost:8081`, а к бэкенду по адресу `http://localhost:8080`.

## Документация API

API предоставляет следующие основные конечные точки:

- **POST /api/request**: Отправка пользовательского запроса и получение ответа.

### Пример запроса

```json
{
  "id": 1,
  "query": "В каком году Университет ИТМО выиграл свой первый чемпионат мира по программированию ACM ICPC?\n1. 1999\n2. 2004\n3. 2012\n4. 2017"
}
```

## Пример ответа

```json
{
  "id": 1,
  "answer": 2,
  "reasoning": "В 2004 году ИТМО выиграл свой первый чемпионат мира по программированию ACM ICPC. Источник: [ссылка]",
  "sources": ["http://example.com/source1", "http://example.com/source2"]
}
```
## Фронтенд

Фронтенд разработан с использованием React и Material-UI, обеспечивая современный и удобный интерфейс для взаимодействия с системой.

### Основные компоненты

- **Сообщения**: Отображение сообщений пользователя и бота.
- **Форма ввода**: Поле для ввода запроса и кнопка отправки.
- **Темизация**: Темная тема для улучшенного визуального восприятия.

### Запуск фронтенда

Фронтенд автоматически запускается с помощью Docker Compose. Для локальной разработки можно перейти в директорию `frontend/llm-agent-megaschool` и запустить:

```bash
docker build -t frontend-llm-agent .
docker run -p 8081:80 frontend-llm-agent
```

## Развертывание

Для развертывания системы в продакшене рекомендуется использовать Docker и Docker Compose, что обеспечивает изоляцию сервисов и простоту управления.

### Шаги развертыванияНастройте переменные окружения в файле .env.
1. Соберите и запустите контейнеры:
2. ```bash
    docker-compose up --build -d
   ```
3. Настройте обратный прокси (например, Nginx) для управления трафиком и обеспечения безопасности.